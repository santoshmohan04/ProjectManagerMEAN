<div class="container mt-4">
  <form [formGroup]="taskForm">
    <div class="d-flex align-items-center mb-3">
      <label class="me-2" for="projectName">Project: <span class="text-danger">*</span></label>
      <input type="text" class="form-control flex-grow-1 me-2" name="projectName" formControlName="ProjectName">
      <button type="button" class="btn btn-default" data-toggle="modal" data-target="#projectSearchModel" [disabled]="taskId && taskId>0">
        <span class="fa fa-search"></span> Search
      </button>
    </div>

    <div class="d-flex align-items-center mb-3">
      <label class="me-2" for="taskName">Task:</label>
      <input type="text" name="taskName" class="form-control flex-grow-1" formControlName="TaskName">
    </div>

    <div class="d-flex align-items-center mb-3">
      <input type="checkbox" name="isParentTask" formControlName="isParentTask" class="me-2">
      <label for="isParentTask">Parent Task</label>
    </div>

    <div class="d-flex align-items-center mb-3">
      <label class="me-2" for="priority">Priority:</label>
      <input type="range" min="0" max="30" step="1" class="form-range flex-grow-1" name="priority" formControlName="Priority"
        [required]="!isParentTask" (input)="updateRange($event)">
      </div>

      <div class="d-flex align-items-center mb-3">
        <label class="me-2" for="parentTaskName">Parent Task:</label>
        <input type="text" class="form-control flex-grow-1 me-2" name="parentTaskName" readonly formControlName="ParentTaskName">
        <button type="button" class="btn btn-default" data-toggle="modal" data-target="#parentSearchModel" [disabled]="isParentTask">
          <span class="fa fa-search"></span> Search
        </button>
      </div>

      <div class="d-flex align-items-center mb-3">
        <label class="me-2" for="Start Date">Start Date:</label>
        <input class="form-control w-25 me-3" placeholder="Start Date" name='startDate' ngbDatepicker #startDatePicker="ngbDatepicker"
          (focus)="startDatePicker.toggle()" [disabled]="isParentTask" formControlName="Start_Date">
          <label class="me-2" for="End Date">End Date:</label>
          <input class="form-control w-25" placeholder="End Date" name='endDate' ngbDatepicker #endDatePicker="ngbDatepicker"
            (focus)="endDatePicker.toggle()" [disabled]="isParentTask" formControlName="End_Date">
          </div>

          <div class="d-flex align-items-center mb-3">
            <label class="me-2" for="user">User:</label>
            <input type="text" class="form-control flex-grow-1 me-2" name='user' readonly formControlName="UserName">
            <button type="button" class="btn btn-default" data-toggle="modal" data-target="#userSearchModel" [disabled]="isParentTask">
              <span class="fa fa-search"></span> Search
            </button>
          </div>

          <div class="d-flex justify-content-end">
            <input type="hidden" name="projectId">
            @if (!taskId) {
              <button class="btn btn-primary me-2" [disabled]="!taskForm.invalid" (click)="addTask()">Add Task</button>
            }
            @if (taskId) {
              <button class="btn btn-primary me-2" [disabled]="!taskForm.invalid" (click)="updateTask()">Update Task</button>
            }
            <button type="button" class="btn btn-secondary" (click)="reset()">Reset</button>
          </div>
        </form>
      </div>